@page
@using DbNetSuiteCoreApp.Enums;
@using DbNetSuiteCore.Enums.DbNetEdit;
@using DbNetSuiteCoreApp.ViewModels;
@using DbNetSuiteCore.Components;

@model SampleModel

@section Title
{
    <p>A grid can be made editable vis the edit dialog by setting the <b>Update</b>, <b>Insert</b> properties. The Edit control is an instance of DbNetEdit and can be configured independently using the <b>EditControl</b> property. The sample also uses the <b>OnFormElementCreated</b> event to customise the Notes textarea.</p>
}

@section Control
{
    @{
        DbNetGridCore employeesGrid = new DbNetGridCore("northwind", "employees");
        employeesGrid.Column("ReportsTo").Lookup(new Lookup("employees", "employeeid", "lastname + ', ' + firstName"));
        employeesGrid.Update = true;
        employeesGrid.Insert = true;
        employeesGrid.Navigation = false;
        employeesGrid.Column(new string[] { "notes", "photo","photopath" }).Hidden();
        employeesGrid.Column("country").Lookup(typeof(CountryEnum), true);
        employeesGrid.EditControl.LayoutColumns = 2;
        employeesGrid.EditControl.Column("notes").ControlType(EditControlType.TextArea).Hidden().DataType(typeof(string));
        employeesGrid.EditControl.Column("ReportsTo").Lookup(new Lookup("employees", "employeeid", "lastname + ', ' + firstName"));
        employeesGrid.EditControl.Bind(EventType.OnFormElementCreated, "configureFormElement");
        @employeesGrid.Render()
    }
}

@section Source {
DbNetGridCore employeesGrid = new DbNetGridCore("northwind", "employees");
employeesGrid.Column("ReportsTo").Lookup(new Lookup("employees", "employeeid", "lastname + ', ' + firstName"));
employeesGrid.Update = true;
employeesGrid.Insert = true;
employeesGrid.Navigation = false;
employeesGrid.Column(new string[] { "notes", "photo","photopath" }).Hidden();
employeesGrid.Column("country").Lookup(typeof(CountryEnum), true);
employeesGrid.EditControl.LayoutColumns = 2;
employeesGrid.EditControl.Column("notes").ControlType(EditControlType.TextArea).Hidden().DataType(typeof(string));
employeesGrid.EditControl.Column("ReportsTo").Lookup(new Lookup("employees", "employeeid", "lastname + ', ' + firstName"));
employeesGrid.EditControl.Bind(EventType.OnFormElementCreated, "configureFormElement");
@@employeesGrid.Render()
}


@section Scripts
    {
    <script type="text/javascript" class="source">
        function configureFormElement(sender, args) {
            if (args.columnName == "notes") {
                args.formElement.rows = 4;
                args.formElement.cols = 50;
            }
        }
    </script>
}

